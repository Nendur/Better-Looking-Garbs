###################################
#
# Better Looking Garbs
#
# Events to alter ethnicity on newly created characters.
#
###################################

namespace = blg

# Ethnic diversity in random courtier spawns.
character_event = {
	id = blg.1
	hide_window = yes
	is_triggered_only = yes

	ai = yes
	min_age = 1
	trigger = {
		trait = blgspawn
	}

	option = { # Leave unchanged / Ruler culture
		ai_chance = {
			factor = 6
			modifier = {
				factor = 0.5
				OR = {
					culture = turkish
					culture = norman
				}
				OR = {
					is_alternate_start = no
					has_alternate_start_parameter = { key = culture value = historical }
				}
			}
		}
	}

	option = { # Local province
		ai_chance = { factor = 3 }
		trigger = {
			employer = {
				NOT = { character = no }
				is_landed = yes
				race = ROOT
			}
			OR = { dynasty = none num_of_dynasty_members <= 1 }
		}

		random_realm_province = {
			limit = { NOT = { province = no } }
			ROOT = {
				set_graphical_culture = PREV
				# random = { chance = 25 culture = PREV }
				# random = { chance = 25 religion = PREV }
			}
		}
	}

	option = { # Neighbour of local province
		ai_chance = { factor = 2 }
		trigger = {
			employer = {
				NOT = { character = no }
				is_landed = yes
				race = ROOT
			}
			OR = { dynasty = none num_of_dynasty_members <= 1 }
		}

		random_realm_province = {
			limit = { NOT = { province = no } }
			random_neighbor_province = {
				limit = { NOT = { province = no } }
				ROOT = {
					set_graphical_culture = PREV
					# random = { chance = 25 culture = PREV }
					# random = { chance = 25 religion = PREV }
				}
			}
		}
	}

	option = { # Geographical region
		ai_chance = {
			factor = 3
			modifier = {
				factor = 3
				culture = norman
				OR = {
					is_alternate_start = no
					has_alternate_start_parameter = { key = culture value = historical }
				}
			}
		}
		trigger = {
			employer = {
				NOT = { character = no }
				is_landed = yes
				race = ROOT
			}
			OR = { dynasty = none num_of_dynasty_members <= 1 }
			OR = {
				is_alternate_start = no
				has_alternate_start_parameter = { key = culture value = historical }
			}
		}

		random_realm_province = {
			limit = { NOT = { province = no } }

			trigger_switch = {
				on_trigger = region

				custom_england = {
					ROOT = {
						if = {
							limit = {
								NOR = {
									graphical_culture = englishgfx
									graphical_culture = celticgfx
									graphical_culture = bretongfx
									graphical_culture = norsegfx
									graphical_culture = saxongfx
									graphical_culture = normangfx
									graphical_culture = norsegaelgfx
								}
							}
							if = {
								limit = { religion_group = pagan_group }
								set_graphical_culture = saxon
							}
							else = {
								set_graphical_culture = english
							}
						}
					}
				}
				custom_scotland = {
					ROOT = {
						if = {
							limit = {
								NOR = {
									graphical_culture = celticgfx
									graphical_culture = bretongfx
									graphical_culture = norsegaelgfx
								}
							}
							set_graphical_culture = scottish
						}
					}
				}
				world_europe_west_brittania = {
					ROOT = {
						if = {
							limit = {
								NOR = {
									graphical_culture = celticgfx
									graphical_culture = bretongfx
									graphical_culture = norsegaelgfx
								}
							}
							set_graphical_culture = welsh
						}
					}
				}
				custom_frisia = {
					ROOT = {
						if = {
							limit = {
								NOR = {
									graphical_culture = westerngfx
									graphical_culture = dutchgfx
									graphical_culture = saxongfx
								}
							}
							if = {
								limit = { religion_group = christian }
								set_graphical_culture = frisian
							}
							else = {
								set_graphical_culture = dutch
							}
						}
					}
				}
				world_europe_west_germania = {
					ROOT = {
						if = {
							limit = {
								NOR = {
									graphical_culture = germangfx
									graphical_culture = westerngfx
									graphical_culture = dutchgfx
									graphical_culture = saxongfx
									graphical_culture = westernslavicgfx
									graphical_culture = bohemiangfx
									graphical_culture = pomeraniangfx
								}
							}
							set_graphical_culture = german
						}
					}
				}
				world_europe_west_francia = {
					ROOT = {
						if = {
							limit = {
								NOR = {
									graphical_culture = frankishgfx
									graphical_culture = westerngfx
									graphical_culture = dutchgfx
									graphical_culture = saxongfx
									graphical_culture = bretongfx
									graphical_culture = trueoccitangfx
									graphical_culture = occitangfx
									graphical_culture = basquegfx
									graphical_culture = gallicgfx
								}
							}
							set_graphical_culture = frankish
						}
					}
				}
				world_europe_west_iberia = {
					ROOT = {
						if = {
							limit = {
								NOR = {
									graphical_culture = southerngfx
									graphical_culture = basquegfx
									graphical_culture = andalusiangfx
									graphical_culture = celtiberiangfx
								}
							}
							if = {
								limit = { religion_group = christian }
								set_graphical_culture = catalan
							}
							else = {
								set_graphical_culture = andalusian_arabic
							}
						}
					}
				}
				custom_eastern_baltic = {
					ROOT = {
						if = {
							limit = {
								NOR = {
									graphical_culture = balticgfx
									graphical_culture = ugricgfx
								}
							}
							if = {
								limit = { PREV = { region = world_europe_north } }
								set_graphical_culture = finnish
							}
							else = {
								set_graphical_culture = lithuanian
							}
						}
					}
				}
				world_europe_north = {
					ROOT = {
						if = {
							limit = {
								NOR = {
									graphical_culture = norsegfx
									graphical_culture = balticgfx
									graphical_culture = ugricgfx
								}
							}
							set_graphical_culture = norse
						}
					}
				}
				world_europe_south_east = {
					ROOT = {
						if = {
							limit = {
								NOR = {
									graphical_culture = croatsouthslavicgfx
									graphical_culture = serbsouthslavicgfx
									graphical_culture = byzantinegfx
									graphical_culture = romanobalkangfx
									graphical_culture = vlachgfx
									graphical_culture = dalmatiangfx
									graphical_culture = hellenicgfx
								}
							}
							set_graphical_culture = croatian
						}
					}
				}
				world_europe_south_italy = {
					if = {
						limit = {
							duchy = {
								OR = {
									title = d_sicily
									title = d_benevento
									title = d_capua
									title = d_apulia
									title = d_salerno
									title = d_calabria
								}
							}
						}
						ROOT = {
							if = {
								limit = {
									NOR = {
										graphical_culture = siciliangfx
										graphical_culture = berbergfx
										graphical_culture = andalusiangfx
									}
								}
								set_graphical_culture = sicilian
							}
						}
					}
					else_if = {
						limit = {
							ROOT = {
								NOR = {
									graphical_culture = italiangfx
									graphical_culture = lombardgfx
									graphical_culture = romangfx
									graphical_culture = siciliangfx
									graphical_culture = dalmatiangfx
									graphical_culture = bohemiangfx
								}
							}
						}
						ROOT = { set_graphical_culture = italian }
					}
				}
				custom_russia = {
					ROOT = {
						if = {
							limit = {
								NOR = {
									graphical_culture = easternslavicgfx 
									graphical_culture = ugricgfx 
								}
							}
							set_graphical_culture = russian
						}
					}
				}
				world_asia_minor = {
					ROOT = {
						if = {
							limit = {
								NOR = {
									graphical_culture = byzantinegfx
									graphical_culture = georgiangfx
									graphical_culture = vlachgfx
									graphical_culture = persiangfx
									graphical_culture = alangfx
									graphical_culture = kurdishgfx
									graphical_culture = outremergfx
									graphical_culture = hellenicgfx
								}
							}
							if = {
								limit = {
									OR = {
										religion_group = muslim
										religion_group = zoroastrian_group
									}
								}
								set_graphical_culture = armenian
							}
							else = {
								set_graphical_culture = greek
							}
						}
					}
				}
				world_middle_east_jerusalem = {
					ROOT = {
						if = {
							limit = {
								NOR = {
									graphical_culture = levantinegfx
									graphical_culture = semitegfx
									graphical_culture = ashkenazigfx
									graphical_culture = kurdishgfx
									graphical_culture = outremergfx
									graphical_culture = egyptiangfx
								}
							}
							set_graphical_culture = levantine_arabic
						}
					}
				}
				world_middle_east_arabia = {
					ROOT = {
						if = {
							limit = {
								NOR = {
									graphical_culture = arabicgfx
									graphical_culture = egyptiangfx
									graphical_culture = muslimgfx
									graphical_culture = levantinegfx
									graphical_culture = semitegfx
									graphical_culture = kurdishgfx
									graphical_culture = outremergfx
								}
							}
							set_graphical_culture = bedouin_arabic
						}
					}
				}
				world_india_deccan = {
					ROOT = {
						if = {
							limit = {
								NOR = {
									graphical_culture = southindiangfx
									graphical_culture = centralindiangfx
								}
							}
							if = {
								limit = { culture_group = dravidian_group }
								set_graphical_culture = tamil
							}
							else = {
								set_graphical_culture = marathi
							}
						}
					}
				}
				world_india = {
					ROOT = {
						if = {
							limit = {
								NOR = {
									graphical_culture = indiangfx
									graphical_culture = indusgfx
									graphical_culture = assamesegfx
									graphical_culture = southindiangfx
									graphical_culture = centralindiangfx
								}
							}
							set_graphical_culture = hindustani
						}
					}
				}
				world_persia = {
					ROOT = {
						if = {
							limit = {
								NOR = {
									graphical_culture = persiangfx
									graphical_culture = afghangfx
									graphical_culture = sogdiangfx
									graphical_culture = kurdishgfx
									graphical_culture = georgiangfx
								}
							}
							set_graphical_culture = persian
						}
					}
				}
				world_africa_north = {
					ROOT = {
						if = {
							limit = {
								NOR = {
									graphical_culture = berbergfx
									graphical_culture = egyptiangfx
								}
							}
							if = {
								limit = { has_global_flag = SWMH }
								set_graphical_culture = berber
							}
							else = {
								set_graphical_culture = maghreb_arabic
							}
						}
					}
				}
				world_africa_west = {
					ROOT = {
						if = {
							limit = {
								NOR = {
									graphical_culture = westafricangfx
									graphical_culture = centralafricangfx
								}
							}
							set_graphical_culture = manden
						}
					}
				}
				world_africa_central = {
					ROOT = {
						if = {
							limit = {
								NOR = {
									graphical_culture = centralafricangfx
									graphical_culture = nubiangfx
									graphical_culture = africangfx
									graphical_culture = somaligfx
								}
							}
							set_graphical_culture = hausa
						}
					}
				}
				world_africa_east = {
					ROOT = {
						if = {
							limit = {
								NOR = {
									graphical_culture = africangfx
									graphical_culture = nubiangfx
									graphical_culture = somaligfx
									graphical_culture = egyptiangfx
									graphical_culture = centralafricangfx
									graphical_culture = arabicgfx
								}
							}
							if = {
								limit = { religion_group = muslim }
								set_graphical_culture = somali
							}
							else = {
								set_graphical_culture = ethiopian
							}
						}
					}
				}
				world_steppe_tarim = {
					ROOT = {
						if = {
							limit = {
								NOR = {
									graphical_culture = sogdiangfx
									graphical_culture = centralasiangfx
									graphical_culture = tochariangfx
								}
							}
							set_graphical_culture = sogdian
						}
					}
				}
				world_steppe_east = {
					ROOT = {
						if = {
							limit = {
								NOR = {
									graphical_culture = mongolgfx
									graphical_culture = khitangfx
									graphical_culture = centralasiangfx
									graphical_culture = siberiangfx
								}
							}
							set_graphical_culture = uyghur
						}
					}
				}
				world_himalayas = {
					ROOT = {
						if = {
							limit = {
								NOR = {
									graphical_culture = bodpagfx
									graphical_culture = khitangfx
									graphical_culture = assamesegfx
									graphical_culture = centralasiangfx
									graphical_culture = tangutgfx
									graphical_culture = sogdiangfx
								}
							}
							set_graphical_culture = bodpa
						}
					}
				}
			}
		}
	}

	option = { # North African mixed areas
		ai_chance = { factor = 4 }
		trigger = {
			OR = {
				culture = maghreb_arabic
				blg_north_african = yes
			}
			OR = { dynasty = none num_of_dynasty_members <= 1 }
			OR = {
				is_alternate_start = no
				has_alternate_start_parameter = { key = culture value = historical }
			}
		}

		random_list = {
			40 = {
				if = {
					limit = { NOT = { has_global_flag = SWMH } }
					set_graphical_culture = maghreb_arabic
				}
				if = {
					limit = { has_global_flag = SWMH }
					set_graphical_culture = berber
				}
			}
			20 = { set_graphical_culture = egyptian_arabic }
			10 = { set_graphical_culture = bedouin_arabic }
			10 = { set_graphical_culture = andalusian_arabic }
			20 = { set_graphical_culture = manden }
		}
	}

	option = { # East African mixed areas
		ai_chance = { factor = 4 }
		trigger = {
			culture_group = east_african
			OR = { dynasty = none num_of_dynasty_members <= 1 }
			OR = {
				is_alternate_start = no
				has_alternate_start_parameter = { key = culture value = historical }
			}
		}

		random_list = {
			40 = { set_graphical_culture = ethiopian }
			10 = { set_graphical_culture = bedouin_arabic }
			20 = { set_graphical_culture = nubian }
		}
	}

	option = { # Steppe mixed areas
		ai_chance = { factor = 2 }
		trigger = {
			culture_group = altaic
			OR = { dynasty = none num_of_dynasty_members <= 1 }
			OR = {
				is_alternate_start = no
				has_alternate_start_parameter = { key = culture value = historical }
			}
		}

		random_list = {
			30 = { set_graphical_culture = cuman }
			30 = { set_graphical_culture = bolghar }
			20 = { set_graphical_culture = pecheneg }
			10 = { set_graphical_culture = sogdian }
			20 = {
				modifier = {
					factor = 0
					NOT = { capital_scope = { OR = { region = world_steppe_east region = world_steppe_tarim } } }
				}
				set_graphical_culture = kirghiz
			}
		}
	}

	option = { # Italian mixed portraits
		ai_chance = { factor = 4 }
		trigger = {
			culture = italian
			OR = { dynasty = none num_of_dynasty_members <= 1 }
			OR = {
				is_alternate_start = no
				has_alternate_start_parameter = { key = culture value = historical }
			}
		}

		random_list = {
			60 = { set_graphical_culture = italian }
			20 = { set_graphical_culture = lombard }
			10 = { set_graphical_culture = sicilian }
		}
	}

	option = { # Bear species
		ai_chance = { factor = 100 }
		trigger = {
			OR = {
				graphical_culture = beargfx
				graphical_culture = polarbeargfx
				graphical_culture = blackbeargfx
			}
		}

		if = {
			limit = { blg_polar_bear = yes }
			set_graphical_culture = polar_bear
		}
		else_if = {
			limit = { blg_black_bear = yes }
			set_graphical_culture = black_bear
		}
		else = {
			set_graphical_culture = bear
		}
	}

	# Add freckles to new characters.
	after = {
		remove_trait = blgspawn

		random_list = {
			2 = { add_trait = freckles_5 }
			6 = { add_trait = freckles_4 }
			7 = { add_trait = freckles }
			7 = { add_trait = freckles_2 }
			10 = { add_trait = freckles_3 }
			5000 = {
				modifier = {
					factor = 0.01
					graphical_culture = celticgfx
					NOT = { has_global_flag = EMF } #Duplicate script
				}
				modifier = {
					factor = 0.02
					OR = {
						graphical_culture = bretongfx
						AND = {
							culture = komi #udmurt
							graphical_culture = ugricgfx
						}
					}
				}
				modifier = {
					factor = 0.04
					OR = {
						graphical_culture = norsegaelgfx
						graphical_culture = tochariangfx
					}
				}
				modifier = {
					factor = 0.06
					OR = {
						graphical_culture = norsegfx
						graphical_culture = saxongfx
					}
					NOT = { has_global_flag = EMF } #Duplicate script
				}
				modifier = {
					factor = 0.08
					culture = uyghur
					graphical_culture = centralasiangfx
				}
				modifier = {
					factor = 0.1
					OR = {
						graphical_culture = englishgfx
						graphical_culture = westerngfx
						graphical_culture = dutchgfx
						graphical_culture = normangfx
					}
				}
				modifier = {
					factor = 0.2
					OR = {
						graphical_culture = germangfx
						graphical_culture = frankishgfx
						graphical_culture = oldfrankishgfx
						graphical_culture = gallicgfx
						graphical_culture = celtiberiangfx
					}
				}
				modifier = {
					factor = 0.5
					OR = {
						graphical_culture = sogdiangfx
						graphical_culture = ashkenazigfx
						graphical_culture = berbergfx
						graphical_culture = vlachgfx
						graphical_culture = romanobalkangfx
						graphical_culture = lombardgfx
					}
				}
				modifier = {
					factor = 0.75
					OR = {
						graphical_culture = crimeangfx
						graphical_culture = visigothgfx
						graphical_culture = afghangfx
						graphical_culture = siberiangfx
						graphical_culture = bohemiangfx
					}
				}
			}
		}
	}
}

# Mixed ethnicity for children.
# Called from on_birth
character_event = {
	id = blg.2
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		remove_trait = blgspawn
	}

	option = { # Leave unchanged
		ai_chance = { factor = 4 }
	}

	option = { # Mixed
		ai_chance = { factor = 6 }

		trigger = { #Only handle known graphical cultures
			true_father_even_if_dead = {
				OR = {
					graphical_culture = westerngfx
					graphical_culture = frankishgfx
					graphical_culture = englishgfx
					graphical_culture = germangfx
					graphical_culture = occitangfx
					graphical_culture = trueoccitangfx
					graphical_culture = southerngfx
					graphical_culture = celticgfx
					graphical_culture = norsegfx
					graphical_culture = saxongfx
					graphical_culture = normangfx
					graphical_culture = italiangfx
					graphical_culture = romangfx
					graphical_culture = dalmatiangfx
					graphical_culture = crimeangfx
					graphical_culture = outremergfx
					graphical_culture = easternslavicgfx
					graphical_culture = westernslavicgfx
					graphical_culture = croatsouthslavicgfx
					graphical_culture = serbsouthslavicgfx
					graphical_culture = byzantinegfx
					graphical_culture = ugricgfx
					graphical_culture = magyargfx
					graphical_culture = muslimgfx
					graphical_culture = arabicgfx
					graphical_culture = turkishgfx
					graphical_culture = cumangfx
					graphical_culture = mongolgfx
					graphical_culture = africangfx
					graphical_culture = andalusiangfx
					graphical_culture = chinesegfx
					graphical_culture = bodpagfx
					graphical_culture = berbergfx
					graphical_culture = levantinegfx
					graphical_culture = westafricangfx
					graphical_culture = persiangfx
					graphical_culture = indiangfx
					graphical_culture = southindiangfx
					graphical_culture = mesoamericangfx
					graphical_culture = hellenicgfx
					graphical_culture = centralafricangfx
					graphical_culture = centralasiangfx
					graphical_culture = steppegfx
					graphical_culture = siberiangfx
					graphical_culture = balticgfx
					graphical_culture = bretongfx
					graphical_culture = bohemiangfx
					graphical_culture = alangfx
					graphical_culture = georgiangfx
					graphical_culture = norsegaelgfx
					graphical_culture = visigothgfx
					graphical_culture = sogdiangfx
					graphical_culture = dutchgfx
					graphical_culture = siciliangfx
					graphical_culture = pomeraniangfx
					graphical_culture = egyptiangfx
					graphical_culture = pecheneggfx
					graphical_culture = afghangfx
					graphical_culture = indusgfx
					graphical_culture = assamesegfx
					graphical_culture = centralindiangfx
					graphical_culture = basquegfx
					graphical_culture = lombardgfx
					graphical_culture = khitangfx
					graphical_culture = semitegfx
					graphical_culture = ashkenazigfx
					graphical_culture = nubiangfx
					graphical_culture = somaligfx
					graphical_culture = gallicgfx
					graphical_culture = romanobalkangfx
					graphical_culture = kurdishgfx
					graphical_culture = tangutgfx
					graphical_culture = avargfx
					graphical_culture = vlachgfx
					graphical_culture = oldfrankishgfx
					graphical_culture = celtiberiangfx
					graphical_culture = tochariangfx
					graphical_culture = khmergfx
				}
			}
			mother_even_if_dead = {
				OR = {
					graphical_culture = westerngfx
					graphical_culture = frankishgfx
					graphical_culture = englishgfx
					graphical_culture = germangfx
					graphical_culture = occitangfx
					graphical_culture = trueoccitangfx
					graphical_culture = southerngfx
					graphical_culture = celticgfx
					graphical_culture = norsegfx
					graphical_culture = saxongfx
					graphical_culture = normangfx
					graphical_culture = italiangfx
					graphical_culture = romangfx
					graphical_culture = dalmatiangfx
					graphical_culture = crimeangfx
					graphical_culture = outremergfx
					graphical_culture = easternslavicgfx
					graphical_culture = westernslavicgfx
					graphical_culture = croatsouthslavicgfx
					graphical_culture = serbsouthslavicgfx
					graphical_culture = byzantinegfx
					graphical_culture = ugricgfx
					graphical_culture = magyargfx
					graphical_culture = muslimgfx
					graphical_culture = arabicgfx
					graphical_culture = turkishgfx
					graphical_culture = cumangfx
					graphical_culture = mongolgfx
					graphical_culture = africangfx
					graphical_culture = andalusiangfx
					graphical_culture = chinesegfx
					graphical_culture = bodpagfx
					graphical_culture = berbergfx
					graphical_culture = levantinegfx
					graphical_culture = westafricangfx
					graphical_culture = persiangfx
					graphical_culture = indiangfx
					graphical_culture = southindiangfx
					graphical_culture = mesoamericangfx
					graphical_culture = hellenicgfx
					graphical_culture = centralafricangfx
					graphical_culture = centralasiangfx
					graphical_culture = steppegfx
					graphical_culture = siberiangfx
					graphical_culture = balticgfx
					graphical_culture = bretongfx
					graphical_culture = bohemiangfx
					graphical_culture = alangfx
					graphical_culture = georgiangfx
					graphical_culture = norsegaelgfx
					graphical_culture = visigothgfx
					graphical_culture = sogdiangfx
					graphical_culture = dutchgfx
					graphical_culture = siciliangfx
					graphical_culture = pomeraniangfx
					graphical_culture = egyptiangfx
					graphical_culture = pecheneggfx
					graphical_culture = afghangfx
					graphical_culture = indusgfx
					graphical_culture = assamesegfx
					graphical_culture = centralindiangfx
					graphical_culture = basquegfx
					graphical_culture = lombardgfx
					graphical_culture = khitangfx
					graphical_culture = semitegfx
					graphical_culture = ashkenazigfx
					graphical_culture = nubiangfx
					graphical_culture = somaligfx
					graphical_culture = gallicgfx
					graphical_culture = romanobalkangfx
					graphical_culture = kurdishgfx
					graphical_culture = tangutgfx
					graphical_culture = avargfx
					graphical_culture = vlachgfx
					graphical_culture = oldfrankishgfx
					graphical_culture = celtiberiangfx
					graphical_culture = tochariangfx
					graphical_culture = khmergfx
				}
			}
		}

		#African
		if = {
			limit = {
				OR = {
					true_father_even_if_dead = {
						OR = {
							graphical_culture = africangfx
							graphical_culture = westafricangfx
							graphical_culture = centralafricangfx
							graphical_culture = nubiangfx
							graphical_culture = somaligfx
						}
					}
					mother_even_if_dead = {
						OR = {
							graphical_culture = africangfx
							graphical_culture = westafricangfx
							graphical_culture = centralafricangfx
							graphical_culture = nubiangfx
							graphical_culture = somaligfx
						}
					}
				}
			}
			if = { #African-Eastern
				limit = {
					OR = {
						true_father_even_if_dead = {
							OR = {
								graphical_culture = muslimgfx
								graphical_culture = arabicgfx
								graphical_culture = egyptiangfx
								graphical_culture = persiangfx
								graphical_culture = afghangfx
								graphical_culture = alangfx
								graphical_culture = sogdiangfx
								graphical_culture = kurdishgfx
								graphical_culture = levantinegfx
								graphical_culture = semitegfx
								graphical_culture = byzantinegfx
								graphical_culture = hellenicgfx
								graphical_culture = georgiangfx
								graphical_culture = turkishgfx
								graphical_culture = cumangfx
								graphical_culture = pecheneggfx
								graphical_culture = avargfx
								graphical_culture = mongolgfx
								graphical_culture = centralasiangfx
								graphical_culture = siberiangfx
								graphical_culture = steppegfx
								graphical_culture = khitangfx
								graphical_culture = chinesegfx
								graphical_culture = tochariangfx
							}
						}
						mother_even_if_dead = {
							OR = {
								graphical_culture = muslimgfx
								graphical_culture = arabicgfx
								graphical_culture = egyptiangfx
								graphical_culture = persiangfx
								graphical_culture = afghangfx
								graphical_culture = alangfx
								graphical_culture = sogdiangfx
								graphical_culture = kurdishgfx
								graphical_culture = levantinegfx
								graphical_culture = semitegfx
								graphical_culture = byzantinegfx
								graphical_culture = hellenicgfx
								graphical_culture = georgiangfx
								graphical_culture = turkishgfx
								graphical_culture = cumangfx
								graphical_culture = pecheneggfx
								graphical_culture = avargfx
								graphical_culture = mongolgfx
								graphical_culture = centralasiangfx
								graphical_culture = siberiangfx
								graphical_culture = steppegfx
								graphical_culture = khitangfx
								graphical_culture = chinesegfx
								graphical_culture = tochariangfx
							}
						}
					}
				}
				if = { #West-African-Eastern
					limit = {
						OR = {
							true_father_even_if_dead = {
								OR = {
									graphical_culture = westafricangfx
									graphical_culture = centralafricangfx
									graphical_culture = nubiangfx
								}
							}
							mother_even_if_dead = {
								OR = {
									graphical_culture = westafricangfx
									graphical_culture = centralafricangfx
									graphical_culture = nubiangfx
								}
							}
						}
					}
					if = {
						limit = { religion_group = muslim }
						set_graphical_culture = somali
					}
					else = {
						set_graphical_culture = ethiopian
					}
				}
				else_if = { #East-African-Eastern
					limit = {
						OR = {
							true_father_even_if_dead = {
								OR = {
									graphical_culture = africangfx
									graphical_culture = somaligfx
								}
							}
							mother_even_if_dead = {
								OR = {
									graphical_culture = africangfx
									graphical_culture = somaligfx
								}
							}
						}
						NOR = {
							true_father_even_if_dead = {
								OR = {
									graphical_culture = muslimgfx
									graphical_culture = arabicgfx
									graphical_culture = egyptiangfx
								}
							}
							mother_even_if_dead = {
								OR = {
									graphical_culture = muslimgfx
									graphical_culture = arabicgfx
									graphical_culture = egyptiangfx
								}
							}
						}
					}
					set_graphical_culture = egyptian_arabic
				}
			}
			else_if = { #African-Indian
				limit = {
					OR = {
						true_father_even_if_dead = {
							OR = {
								graphical_culture = indiangfx
								graphical_culture = indusgfx
								graphical_culture = bodpagfx
								graphical_culture = assamesegfx
								graphical_culture = tangutgfx
								graphical_culture = mesoamericangfx
							}
						}
						mother_even_if_dead = {
							OR = {
								graphical_culture = indiangfx
								graphical_culture = indusgfx
								graphical_culture = bodpagfx
								graphical_culture = assamesegfx
								graphical_culture = tangutgfx
								graphical_culture = mesoamericangfx
							}
						}
					}
				}
				if = {
					limit = {
						OR = {
							culture_group = indo_aryan_group 
							culture_group = tibetan_group 
						}
					}
					set_graphical_culture = marathi
				}
				else = {
					set_graphical_culture = tamil
				}
			}
			else_if = { #African-Iberian
				limit = {
					OR = {
						true_father_even_if_dead = {
							OR = {
								graphical_culture = southerngfx
								graphical_culture = andalusiangfx
								graphical_culture = basquegfx
								graphical_culture = celtiberiangfx
							}
						}
						mother_even_if_dead = {
							OR = {
								graphical_culture = southerngfx
								graphical_culture = andalusiangfx
								graphical_culture = basquegfx
								graphical_culture = celtiberiangfx
							}
						}
					}
				}
				if = {
					limit = { has_global_flag = SWMH }
					set_graphical_culture = berber
				}
				else = {
					set_graphical_culture = maghreb_arabic
				}
			}
			else_if = { #African-European
				limit = {
					OR = {
						true_father_even_if_dead = {
							NOT = {
								graphical_culture = africangfx
								graphical_culture = westafricangfx
								graphical_culture = centralafricangfx
								graphical_culture = nubiangfx
								graphical_culture = somaligfx
								graphical_culture = berbergfx
								graphical_culture = siciliangfx
								graphical_culture = centralindiangfx
								graphical_culture = southindiangfx
								graphical_culture = khmergfx
							}
						}
						mother_even_if_dead = {
							NOT = {
								graphical_culture = africangfx
								graphical_culture = westafricangfx
								graphical_culture = centralafricangfx
								graphical_culture = nubiangfx
								graphical_culture = somaligfx
								graphical_culture = berbergfx
								graphical_culture = siciliangfx
								graphical_culture = centralindiangfx
								graphical_culture = southindiangfx
								graphical_culture = khmergfx
							}
						}
					}
				}
				set_graphical_culture = egyptian_arabic
			}
		}

		#South-Indian
		else_if = {
			limit = {
				OR = {
					true_father_even_if_dead = {
						OR = {
							graphical_culture = southindiangfx
							graphical_culture = centralindiangfx
						}
					}
					mother_even_if_dead = {
						OR = {
							graphical_culture = southindiangfx
							graphical_culture = centralindiangfx
						}
					}
				}
			}
			if = { #South-Indian-Altaic
				limit = {
					OR = {
						true_father_even_if_dead = {
							OR = {
								graphical_culture = turkishgfx
								graphical_culture = cumangfx
								graphical_culture = pecheneggfx
								graphical_culture = steppegfx
								graphical_culture = avargfx
								graphical_culture = mongolgfx
								graphical_culture = centralasiangfx
								graphical_culture = siberiangfx
								graphical_culture = khitangfx
								graphical_culture = chinesegfx
							}
						}
						mother_even_if_dead = {
							OR = {
								graphical_culture = turkishgfx
								graphical_culture = cumangfx
								graphical_culture = pecheneggfx
								graphical_culture = steppegfx
								graphical_culture = avargfx
								graphical_culture = mongolgfx
								graphical_culture = centralasiangfx
								graphical_culture = siberiangfx
								graphical_culture = khitangfx
								graphical_culture = chinesegfx
							}
						}
					}
				}
				if = {
					limit = {
						OR = {
							culture_group = tibetan_group
							culture_group = altaic
						}
					}
					set_graphical_culture = bodpa
				}
				else_if = {
					limit = { culture_group = chinese_group }
					set_graphical_culture = tangut
				}
				else = {
					set_graphical_culture = assamese
				}
			}
			else_if = { #South-Indian-Other
				limit = {
					OR = {
						true_father_even_if_dead = {
							NOT = {
								graphical_culture = indiangfx
								graphical_culture = southindiangfx
								graphical_culture = centralindiangfx
								graphical_culture = assamesegfx
								graphical_culture = bodpagfx
								graphical_culture = tangutgfx
								graphical_culture = indusgfx
								graphical_culture = muslimgfx
								graphical_culture = arabicgfx
								graphical_culture = egyptiangfx
								graphical_culture = khmergfx
								graphical_culture = mesoamericangfx
							}
						}
						mother_even_if_dead = {
							NOT = {
								graphical_culture = indiangfx
								graphical_culture = southindiangfx
								graphical_culture = centralindiangfx
								graphical_culture = assamesegfx
								graphical_culture = bodpagfx
								graphical_culture = tangutgfx
								graphical_culture = indusgfx
								graphical_culture = muslimgfx
								graphical_culture = arabicgfx
								graphical_culture = egyptiangfx
								graphical_culture = khmergfx
								graphical_culture = mesoamericangfx
							}
						}
					}
				}
				if = {
					limit = {
						OR = {
							culture_group = indo_aryan_group 
							culture_group = tibetan_group 
						}
					}
					set_graphical_culture = hindustani
				}
				else = {
					set_graphical_culture = panjabi
				}
			}
		}

		#Indian
		else_if = {
			limit = {
				OR = {
					true_father_even_if_dead = {
						OR = {
							graphical_culture = indiangfx
							graphical_culture = indusgfx
						}
					}
					mother_even_if_dead = {
						OR = {
							graphical_culture = indiangfx
							graphical_culture = indusgfx
						}
					}
				}
			}
			if = { #Indian-Mongolian
				limit = {
					OR = {
						true_father_even_if_dead = {
							OR = {
								graphical_culture = mongolgfx
								graphical_culture = centralasiangfx
								graphical_culture = khitangfx
							}
						}
						mother_even_if_dead = {
							OR = {
								graphical_culture = mongolgfx
								graphical_culture = centralasiangfx
								graphical_culture = khitangfx
							}
						}
					}
				}
				if = {
					limit = {
						OR = {
							culture_group = tibetan_group
							culture_group = altaic
						}
					}
					set_graphical_culture = bodpa
				}
				else_if = {
					limit = { culture_group = chinese_group }
					set_graphical_culture = tangut
				}
				else = {
					set_graphical_culture = assamese
				}
			}
			else_if = { #Indian-Turkic
				limit = {
					OR = {
						true_father_even_if_dead = {
							OR = {
								graphical_culture = turkishgfx
								graphical_culture = cumangfx
								graphical_culture = pecheneggfx
								graphical_culture = steppegfx
								graphical_culture = avargfx
								graphical_culture = siberiangfx
								graphical_culture = chinesegfx
								graphical_culture = ugricgfx
								graphical_culture = magyargfx
							}
						}
						mother_even_if_dead = {
							OR = {
								graphical_culture = turkishgfx
								graphical_culture = cumangfx
								graphical_culture = pecheneggfx
								graphical_culture = steppegfx
								graphical_culture = avargfx
								graphical_culture = siberiangfx
								graphical_culture = chinesegfx
								graphical_culture = ugricgfx
								graphical_culture = magyargfx
							}
						}
					}
				}
				if = {
					limit = {
						OR = {
							culture = mongol
							culture = cuman
						}
					}
					set_graphical_culture = mongol
				}
				else_if = {
					limit = {
						OR = {
							culture_group = chinese_group
							culture = khitan
							culture = jurchen
						}
					}
					set_graphical_culture = khitan
				}
				else = {
					set_graphical_culture = uyghur
				}
			}
			else_if = { #Indian-Other
				limit = {
					OR = {
						true_father_even_if_dead = {
							NOT = {
								graphical_culture = indiangfx
								graphical_culture = assamesegfx
								graphical_culture = bodpagfx
								graphical_culture = tangutgfx
								graphical_culture = indusgfx
								graphical_culture = afghangfx
								graphical_culture = muslimgfx
								graphical_culture = arabicgfx
								graphical_culture = egyptiangfx
								graphical_culture = khmergfx
								graphical_culture = mesoamericangfx
							}
						}
						mother_even_if_dead = {
							NOT = {
								graphical_culture = indiangfx
								graphical_culture = assamesegfx
								graphical_culture = bodpagfx
								graphical_culture = tangutgfx
								graphical_culture = indusgfx
								graphical_culture = afghangfx
								graphical_culture = muslimgfx
								graphical_culture = arabicgfx
								graphical_culture = egyptiangfx
								graphical_culture = khmergfx
								graphical_culture = mesoamericangfx
							}
						}
					}
				}
				if = {
					limit = { culture_group = mesoamerican }
					set_graphical_culture = nahuatl
				}
				else = {
					set_graphical_culture = afghan
				}
			}
		}

		#Tibetan
		else_if = {
			limit = {
				OR = {
					true_father_even_if_dead = {
						OR = {
							graphical_culture = bodpagfx
							graphical_culture = assamesegfx
							graphical_culture = tangutgfx
							graphical_culture = khmergfx
						}
					}
					mother_even_if_dead = {
						OR = {
							graphical_culture = bodpagfx
							graphical_culture = assamesegfx
							graphical_culture = tangutgfx
							graphical_culture = khmergfx
						}
					}
				}
			}
			if = { #Tibetan-Turkic
				limit = {
					OR = {
						true_father_even_if_dead = {
							OR = {
								graphical_culture = steppegfx
								graphical_culture = cumangfx
								graphical_culture = pecheneggfx
								graphical_culture = avargfx
								graphical_culture = siberiangfx
								graphical_culture = ugricgfx
								graphical_culture = magyargfx
								graphical_culture = turkishgfx
								graphical_culture = chinesegfx
							}
						}
						mother_even_if_dead = {
							OR = {
								graphical_culture = steppegfx
								graphical_culture = cumangfx
								graphical_culture = pecheneggfx
								graphical_culture = avargfx
								graphical_culture = siberiangfx
								graphical_culture = ugricgfx
								graphical_culture = magyargfx
								graphical_culture = turkishgfx
								graphical_culture = chinesegfx
							}
						}
					}
				}
				if = {
					limit = {
						OR = {
							culture = mongol
							culture = cuman
						}
					}
					set_graphical_culture = mongol
				}
				else_if = {
					limit = {
						OR = {
							culture_group = chinese_group
							culture = khitan
							culture = jurchen
						}
					}
					set_graphical_culture = khitan
				}
				else = {
					set_graphical_culture = uyghur
				}
			}
			else_if = { #Tibetan-European
				limit = {
					OR = {
						true_father_even_if_dead = {
							NOT = {
								graphical_culture = bodpagfx
								graphical_culture = assamesegfx
								graphical_culture = tangutgfx
								graphical_culture = mongolgfx
								graphical_culture = centralasiangfx
								graphical_culture = khitangfx
								graphical_culture = persiangfx
								graphical_culture = afghangfx
								graphical_culture = alangfx
								graphical_culture = sogdiangfx
								graphical_culture = kurdishgfx
								graphical_culture = muslimgfx
								graphical_culture = arabicgfx
								graphical_culture = egyptiangfx
								graphical_culture = khmergfx
								graphical_culture = mesoamericangfx
							}
						}
						mother_even_if_dead = {
							NOT = {
								graphical_culture = bodpagfx
								graphical_culture = assamesegfx
								graphical_culture = tangutgfx
								graphical_culture = mongolgfx
								graphical_culture = centralasiangfx
								graphical_culture = khitangfx
								graphical_culture = persiangfx
								graphical_culture = afghangfx
								graphical_culture = alangfx
								graphical_culture = sogdiangfx
								graphical_culture = kurdishgfx
								graphical_culture = muslimgfx
								graphical_culture = arabicgfx
								graphical_culture = egyptiangfx
								graphical_culture = khmergfx
								graphical_culture = mesoamericangfx
							}
						}
					}
				}
				if = {
					limit = {
						OR = {
							culture_group = tibetan_group
							culture_group = altaic
							culture_group = chinese_group
						}
					}
					set_graphical_culture = sogdian
				}
				else = {
					set_graphical_culture = afghan
				}
			}
		}

		#Arabic
		else_if = {
			limit = {
				OR = {
					true_father_even_if_dead = {
						OR = {
							graphical_culture = muslimgfx
							graphical_culture = arabicgfx
							graphical_culture = egyptiangfx
							graphical_culture = berbergfx
							graphical_culture = mesoamericangfx
						}
					}
					mother_even_if_dead = {
						OR = {
							graphical_culture = muslimgfx
							graphical_culture = arabicgfx
							graphical_culture = egyptiangfx
							graphical_culture = berbergfx
							graphical_culture = mesoamericangfx
						}
					}
				}
			}
			if = { #Arabic-Altaic
				limit = {
					OR = {
						true_father_even_if_dead = {
							OR = {
								graphical_culture = cumangfx
								graphical_culture = mongolgfx
								graphical_culture = centralasiangfx
								graphical_culture = siberiangfx
								graphical_culture = khitangfx
								graphical_culture = turkishgfx
								graphical_culture = pecheneggfx
								graphical_culture = avargfx
								graphical_culture = chinesegfx
								graphical_culture = tochariangfx
							}
						}
						mother_even_if_dead = {
							OR = {
								graphical_culture = cumangfx
								graphical_culture = mongolgfx
								graphical_culture = centralasiangfx
								graphical_culture = siberiangfx
								graphical_culture = khitangfx
								graphical_culture = turkishgfx
								graphical_culture = pecheneggfx
								graphical_culture = avargfx
								graphical_culture = chinesegfx
								graphical_culture = tochariangfx
							}
						}
					}
				}
				set_graphical_culture = bolghar
			}
			else_if = { #Arabic-Eastern-European
				limit = {
					OR = {
						true_father_even_if_dead = {
							OR = {
								graphical_culture = byzantinegfx
								graphical_culture = georgiangfx
								graphical_culture = hellenicgfx
								graphical_culture = easternslavicgfx
								graphical_culture = westernslavicgfx
								graphical_culture = bohemiangfx
								graphical_culture = pomeraniangfx
								graphical_culture = croatsouthslavicgfx
								graphical_culture = serbsouthslavicgfx
								graphical_culture = vlachgfx
								graphical_culture = magyargfx
								graphical_culture = ugricgfx
							}
						}
						mother_even_if_dead = {
							OR = {
								graphical_culture = byzantinegfx
								graphical_culture = georgiangfx
								graphical_culture = hellenicgfx
								graphical_culture = easternslavicgfx
								graphical_culture = westernslavicgfx
								graphical_culture = bohemiangfx
								graphical_culture = pomeraniangfx
								graphical_culture = croatsouthslavicgfx
								graphical_culture = serbsouthslavicgfx
								graphical_culture = vlachgfx
								graphical_culture = magyargfx
								graphical_culture = ugricgfx
							}
						}
					}
				}
				if = {
					limit = {
						OR = {
							culture_group = byzantine
							culture_group = israelite
						}
					}
					set_graphical_culture = assyrian
				}
				else = {
					set_graphical_culture = levantine_arabic
				}
			}
			else_if = { #Arabic-European
				limit = {
					OR = {
						true_father_even_if_dead = {
							NOT = {
								graphical_culture = muslimgfx
								graphical_culture = arabicgfx
								graphical_culture = egyptiangfx
								graphical_culture = indusgfx
								graphical_culture = levantinegfx
								graphical_culture = semitegfx
								graphical_culture = persiangfx
								graphical_culture = alangfx
								graphical_culture = afghangfx
								graphical_culture = sogdiangfx
								graphical_culture = kurdishgfx
								graphical_culture = andalusiangfx
								graphical_culture = berbergfx
								graphical_culture = siciliangfx
								graphical_culture = steppegfx
								graphical_culture = mesoamericangfx
							}
						}
						mother_even_if_dead = {
							NOT = {
								graphical_culture = muslimgfx
								graphical_culture = arabicgfx
								graphical_culture = egyptiangfx
								graphical_culture = indusgfx
								graphical_culture = levantinegfx
								graphical_culture = semitegfx
								graphical_culture = persiangfx
								graphical_culture = alangfx
								graphical_culture = afghangfx
								graphical_culture = sogdiangfx
								graphical_culture = kurdishgfx
								graphical_culture = andalusiangfx
								graphical_culture = berbergfx
								graphical_culture = siciliangfx
								graphical_culture = steppegfx
								graphical_culture = mesoamericangfx
							}
						}
					}
				}
				set_graphical_culture = andalusian_arabic
			}
		}

		#Steppes
		else_if = {
			limit = {
				OR = {
					true_father_even_if_dead = {
						OR = {
							graphical_culture = cumangfx
							graphical_culture = steppegfx
							graphical_culture = mongolgfx
							graphical_culture = centralasiangfx
							graphical_culture = siberiangfx
							graphical_culture = khitangfx
						}
					}
					mother_even_if_dead = {
						OR = {
							graphical_culture = cumangfx
							graphical_culture = steppegfx
							graphical_culture = mongolgfx
							graphical_culture = centralasiangfx
							graphical_culture = siberiangfx
							graphical_culture = khitangfx
						}
					}
				}
			}
			if = { #Mongol-Persian
				limit = {
					OR = {
						true_father_even_if_dead = {
							OR = {
								graphical_culture = persiangfx
								graphical_culture = afghangfx
								graphical_culture = kurdishgfx
								graphical_culture = tochariangfx
							}
						}
						mother_even_if_dead = {
							OR = {
								graphical_culture = persiangfx
								graphical_culture = afghangfx
								graphical_culture = kurdishgfx
								graphical_culture = tochariangfx
							}
						}
					}
				}
				set_graphical_culture = sogdian
			}
			else_if = { #Mongol-European
				limit = {
					OR = {
						true_father_even_if_dead = {
							NOT = {
								graphical_culture = turkishgfx
								graphical_culture = steppegfx
								graphical_culture = cumangfx
								graphical_culture = pecheneggfx
								graphical_culture = avargfx
								graphical_culture = mongolgfx
								graphical_culture = centralasiangfx
								graphical_culture = siberiangfx
								graphical_culture = khitangfx
								graphical_culture = chinesegfx
								graphical_culture = alangfx
								graphical_culture = sogdiangfx
								graphical_culture = levantinegfx
								graphical_culture = semitegfx
							}
						}
						mother_even_if_dead = {
							NOT = {
								graphical_culture = turkishgfx
								graphical_culture = steppegfx
								graphical_culture = cumangfx
								graphical_culture = pecheneggfx
								graphical_culture = avargfx
								graphical_culture = mongolgfx
								graphical_culture = centralasiangfx
								graphical_culture = siberiangfx
								graphical_culture = khitangfx
								graphical_culture = chinesegfx
								graphical_culture = alangfx
								graphical_culture = sogdiangfx
								graphical_culture = levantinegfx
								graphical_culture = semitegfx
							}
						}
					}
				}
				if = {
					limit = {
						OR = {
							culture_group = indo_aryan_group 
							culture_group = tibetan_group 
							culture_group = dravidian_group 
							culture_group = chinese_group 
						}
					}
					set_graphical_culture = tocharian
				}
				else_if = {
					limit = { culture_group = altaic }
					set_graphical_culture = turkish
				}
				else = {
					set_graphical_culture = avar
				}
			}
		}

		#Byzantine/Levant/Persian
		else_if = {
			limit = {
				OR = {
					true_father_even_if_dead = {
						OR = {
							graphical_culture = byzantinegfx
							graphical_culture = georgiangfx
							graphical_culture = levantinegfx
							graphical_culture = semitegfx
							graphical_culture = persiangfx
							graphical_culture = afghangfx
							graphical_culture = alangfx
							graphical_culture = sogdiangfx
							graphical_culture = kurdishgfx
							graphical_culture = hellenicgfx
						}
					}
					mother_even_if_dead = {
						OR = {
							graphical_culture = byzantinegfx
							graphical_culture = georgiangfx
							graphical_culture = levantinegfx
							graphical_culture = semitegfx
							graphical_culture = persiangfx
							graphical_culture = afghangfx
							graphical_culture = alangfx
							graphical_culture = sogdiangfx
							graphical_culture = kurdishgfx
							graphical_culture = hellenicgfx
						}
					}
				}
			}
			if = { #Byzantine-Persian
				limit = {
					OR = {
						true_father_even_if_dead = {
							OR = {
								graphical_culture = byzantinegfx
								graphical_culture = hellenicgfx
							}
						}
						mother_even_if_dead = {
							OR = {
								graphical_culture = byzantinegfx
								graphical_culture = hellenicgfx
							}
						}
					}
					OR = {
						true_father_even_if_dead = {
							OR = {
								graphical_culture = persiangfx
								graphical_culture = afghangfx
								graphical_culture = alangfx
								graphical_culture = sogdiangfx
								graphical_culture = kurdishgfx
							}
						}
						mother_even_if_dead = {
							OR = {
								graphical_culture = persiangfx
								graphical_culture = afghangfx
								graphical_culture = alangfx
								graphical_culture = sogdiangfx
								graphical_culture = kurdishgfx
							}
						}
					}
				}
				set_graphical_culture = armenian
			}
			else_if = { #Byzantine-Eastern
				limit = {
					OR = {
						true_father_even_if_dead = {
							OR = {
								graphical_culture = easternslavicgfx
								graphical_culture = westernslavicgfx
								graphical_culture = croatsouthslavicgfx
								graphical_culture = serbsouthslavicgfx
								graphical_culture = dalmatiangfx
								graphical_culture = romanobalkangfx
								graphical_culture = pomeraniangfx
								graphical_culture = bohemiangfx
								graphical_culture = magyargfx
								graphical_culture = avargfx
								graphical_culture = balticgfx
								graphical_culture = ugricgfx
								graphical_culture = chinesegfx
								graphical_culture = celtiberiangfx
							}
						}
						mother_even_if_dead = {
							OR = {
								graphical_culture = easternslavicgfx
								graphical_culture = westernslavicgfx
								graphical_culture = croatsouthslavicgfx
								graphical_culture = serbsouthslavicgfx
								graphical_culture = dalmatiangfx
								graphical_culture = romanobalkangfx
								graphical_culture = pomeraniangfx
								graphical_culture = bohemiangfx
								graphical_culture = magyargfx
								graphical_culture = avargfx
								graphical_culture = balticgfx
								graphical_culture = ugricgfx
								graphical_culture = chinesegfx
								graphical_culture = celtiberiangfx
							}
						}
					}
				}
				set_graphical_culture = romanian
			}
			else_if = { #Byzantine-Southern
				limit = {
					OR = {
						true_father_even_if_dead = {
							OR = {
								graphical_culture = italiangfx
								graphical_culture = romangfx
								graphical_culture = occitangfx
								graphical_culture = trueoccitangfx
								graphical_culture = southerngfx
								graphical_culture = andalusiangfx
							}
						}
						mother_even_if_dead = {
							OR = {
								graphical_culture = italiangfx
								graphical_culture = romangfx
								graphical_culture = occitangfx
								graphical_culture = trueoccitangfx
								graphical_culture = southerngfx
								graphical_culture = andalusiangfx
							}
						}
					}
				}
				set_graphical_culture = sicilian
			}
			else_if = { #Byzantine-European
				limit = {
					OR = {
						true_father_even_if_dead = {
							OR = {
								graphical_culture = lombardgfx
								graphical_culture = frankishgfx
								graphical_culture = germangfx
								graphical_culture = oldfrankishgfx
								graphical_culture = celticgfx
								graphical_culture = bretongfx
								graphical_culture = dutchgfx
								graphical_culture = westerngfx
								graphical_culture = englishgfx
								graphical_culture = saxongfx
								graphical_culture = norsegfx
								graphical_culture = norsegaelgfx
								graphical_culture = normangfx
								graphical_culture = crimeangfx
								graphical_culture = visigothgfx
							}
						}
						mother_even_if_dead = {
							OR = {
								graphical_culture = lombardgfx
								graphical_culture = frankishgfx
								graphical_culture = germangfx
								graphical_culture = oldfrankishgfx
								graphical_culture = celticgfx
								graphical_culture = bretongfx
								graphical_culture = dutchgfx
								graphical_culture = westerngfx
								graphical_culture = englishgfx
								graphical_culture = saxongfx
								graphical_culture = norsegfx
								graphical_culture = norsegaelgfx
								graphical_culture = normangfx
								graphical_culture = crimeangfx
								graphical_culture = visigothgfx
							}
						}
					}
				}
				set_graphical_culture = basque
			}
		}

		#Western Steppe
		else_if = {
			limit = {
				OR = {
					true_father_even_if_dead = {
						OR = {
							graphical_culture = turkishgfx
							graphical_culture = pecheneggfx
							graphical_culture = avargfx
							graphical_culture = tochariangfx
						}
					}
					mother_even_if_dead = {
						OR = {
							graphical_culture = turkishgfx
							graphical_culture = pecheneggfx
							graphical_culture = avargfx
							graphical_culture = tochariangfx
						}
					}
				}
			}
			if = { #Steppe-Northern
				limit = {
					OR = {
						true_father_even_if_dead = {
							OR = {
								graphical_culture = westernslavicgfx
								graphical_culture = pomeraniangfx
								graphical_culture = bohemiangfx
								graphical_culture = balticgfx
								graphical_culture = ugricgfx
								graphical_culture = norsegfx
								graphical_culture = norsegaelgfx
								graphical_culture = crimeangfx
								graphical_culture = englishgfx
								graphical_culture = normangfx
								graphical_culture = saxongfx
								graphical_culture = dutchgfx
							}
						}
						mother_even_if_dead = {
							OR = {
								graphical_culture = westernslavicgfx
								graphical_culture = pomeraniangfx
								graphical_culture = bohemiangfx
								graphical_culture = balticgfx
								graphical_culture = ugricgfx
								graphical_culture = norsegfx
								graphical_culture = norsegaelgfx
								graphical_culture = crimeangfx
								graphical_culture = englishgfx
								graphical_culture = normangfx
								graphical_culture = saxongfx
								graphical_culture = dutchgfx
							}
						}
					}
				}
				set_graphical_culture = russian
			}
			else_if = { #Steppe-Western
				limit = {
					OR = {
						true_father_even_if_dead = {
							NOT = {
								graphical_culture = turkishgfx
								graphical_culture = pecheneggfx
								graphical_culture = avargfx
								graphical_culture = tochariangfx
								graphical_culture = easternslavicgfx
								graphical_culture = magyargfx
								graphical_culture = chinesegfx
							}
						}
						mother_even_if_dead = {
							NOT = {
								graphical_culture = turkishgfx
								graphical_culture = pecheneggfx
								graphical_culture = avargfx
								graphical_culture = tochariangfx
								graphical_culture = easternslavicgfx
								graphical_culture = magyargfx
								graphical_culture = chinesegfx
							}
						}
					}
				}
				set_graphical_culture = hungarian
			}
		}

		#Southernslavic
		else_if = {
			limit = {
				OR = {
					true_father_even_if_dead = {
						OR = {
							graphical_culture = croatsouthslavicgfx
							graphical_culture = serbsouthslavicgfx
							graphical_culture = romanobalkangfx
							graphical_culture = vlachgfx
							graphical_culture = ashkenazigfx
						}
					}
					mother_even_if_dead = {
						OR = {
							graphical_culture = croatsouthslavicgfx
							graphical_culture = serbsouthslavicgfx
							graphical_culture = romanobalkangfx
							graphical_culture = vlachgfx
							graphical_culture = ashkenazigfx
						}
					}
				}
			}
			if = { #Southernslavic-Southern
				limit = {
					OR = {
						true_father_even_if_dead = {
							OR = {
								graphical_culture = italiangfx
								graphical_culture = siciliangfx
								graphical_culture = romangfx
								graphical_culture = southerngfx
								graphical_culture = andalusiangfx
								graphical_culture = trueoccitangfx
								graphical_culture = occitangfx
							}
						}
						mother_even_if_dead = {
							OR = {
								graphical_culture = italiangfx
								graphical_culture = siciliangfx
								graphical_culture = romangfx
								graphical_culture = southerngfx
								graphical_culture = andalusiangfx
								graphical_culture = trueoccitangfx
								graphical_culture = occitangfx
							}
						}
					}
				}
				set_graphical_culture = dalmatian
			}
			else_if = { #Southernslavic-Western
				limit = {
					OR = {
						true_father_even_if_dead = {
							OR = {
								graphical_culture = germangfx
								graphical_culture = frankishgfx
								graphical_culture = oldfrankishgfx
								graphical_culture = lombardgfx
								graphical_culture = basquegfx
								graphical_culture = celticgfx
								graphical_culture = bretongfx
							}
						}
						mother_even_if_dead = {
							OR = {
								graphical_culture = germangfx
								graphical_culture = frankishgfx
								graphical_culture = oldfrankishgfx
								graphical_culture = lombardgfx
								graphical_culture = basquegfx
								graphical_culture = celticgfx
								graphical_culture = bretongfx
							}
						}
					}
				}
				set_graphical_culture = bohemian
			}
			else_if = { #Southernslavic-Northern
				limit = {
					OR = {
						true_father_even_if_dead = {
							OR = {
								graphical_culture = westerngfx
								graphical_culture = englishgfx
								graphical_culture = dutchgfx
								graphical_culture = normangfx
								graphical_culture = norsegfx
								graphical_culture = norsegaelgfx
								graphical_culture = crimeangfx
								graphical_culture = saxongfx
								graphical_culture = ugricgfx
								graphical_culture = balticgfx
							}
						}
						mother_even_if_dead = {
							OR = {
								graphical_culture = westerngfx
								graphical_culture = englishgfx
								graphical_culture = dutchgfx
								graphical_culture = normangfx
								graphical_culture = norsegfx
								graphical_culture = norsegaelgfx
								graphical_culture = crimeangfx
								graphical_culture = saxongfx
								graphical_culture = ugricgfx
								graphical_culture = balticgfx
							}
						}
					}
				}
				set_graphical_culture = polish
			}
		}

		#Southern
		else_if = {
			limit = {
				OR = {
					true_father_even_if_dead = {
						OR = {
							graphical_culture = southerngfx
							graphical_culture = andalusiangfx
							graphical_culture = italiangfx
							graphical_culture = siciliangfx
							graphical_culture = romangfx
							graphical_culture = dalmatiangfx
							graphical_culture = basquegfx
							graphical_culture = celtiberiangfx
						}
					}
					mother_even_if_dead = {
						OR = {
							graphical_culture = southerngfx
							graphical_culture = andalusiangfx
							graphical_culture = italiangfx
							graphical_culture = siciliangfx
							graphical_culture = romangfx
							graphical_culture = dalmatiangfx
							graphical_culture = basquegfx
							graphical_culture = celtiberiangfx
						}
					}
				}
			}
			if = { #Southern-Other
				limit = {
					OR = {
						true_father_even_if_dead = {
							NOR = {
								graphical_culture = italiangfx
								graphical_culture = siciliangfx
								graphical_culture = romangfx
								graphical_culture = dalmatiangfx
								graphical_culture = southerngfx
								graphical_culture = andalusiangfx
								graphical_culture = trueoccitangfx
								graphical_culture = occitangfx
								graphical_culture = basquegfx
								graphical_culture = celtiberiangfx
								graphical_culture = visigothgfx
								graphical_culture = lombardgfx
								graphical_culture = chinesegfx
							}
						}
						mother_even_if_dead = {
							NOR = {
								graphical_culture = italiangfx
								graphical_culture = siciliangfx
								graphical_culture = romangfx
								graphical_culture = dalmatiangfx
								graphical_culture = southerngfx
								graphical_culture = andalusiangfx
								graphical_culture = trueoccitangfx
								graphical_culture = occitangfx
								graphical_culture = basquegfx
								graphical_culture = celtiberiangfx
								graphical_culture = visigothgfx
								graphical_culture = lombardgfx
								graphical_culture = chinesegfx
							}
						}
					}
				}
				set_graphical_culture = occitan
			}
		}

		#Western
		else_if = {
			limit = {
				OR = {
					true_father_even_if_dead = {
						OR = {
							graphical_culture = westerngfx
							graphical_culture = englishgfx
							graphical_culture = dutchgfx
							graphical_culture = germangfx
							graphical_culture = frankishgfx
							graphical_culture = oldfrankishgfx
							graphical_culture = normangfx
							graphical_culture = lombardgfx
							graphical_culture = visigothgfx
						}
					}
					mother_even_if_dead = {
						OR = {
							graphical_culture = westerngfx
							graphical_culture = englishgfx
							graphical_culture = dutchgfx
							graphical_culture = germangfx
							graphical_culture = frankishgfx
							graphical_culture = oldfrankishgfx
							graphical_culture = normangfx
							graphical_culture = lombardgfx
							graphical_culture = visigothgfx
						}
					}
				}
			}
			if = { #Western-Slavic/Ugric
				limit = {
					OR = {
						true_father_even_if_dead = {
							OR = {
								graphical_culture = easternslavicgfx
								graphical_culture = ugricgfx
								graphical_culture = magyargfx
								graphical_culture = balticgfx
							}
						}
						mother_even_if_dead = {
							OR = {
								graphical_culture = easternslavicgfx
								graphical_culture = ugricgfx
								graphical_culture = magyargfx
								graphical_culture = balticgfx
							}
						}
					}
				}
				set_graphical_culture = polish
			}
			else_if = { #Western-Celtic
				limit = {
					OR = {
						true_father_even_if_dead = { graphical_culture = celticgfx }
						mother_even_if_dead = { graphical_culture = celticgfx }
					}
				}
				set_graphical_culture = welsh
			}
			else_if = { #Western-Norse
				limit = {
					NOR = {
						true_father_even_if_dead = {
							graphical_culture = normangfx
						}
						mother_even_if_dead = {
							graphical_culture = normangfx
						}
					}
					OR = {
						true_father_even_if_dead = {
							OR = {
								graphical_culture = norsegfx
								graphical_culture = norsegaelgfx
								graphical_culture = crimeangfx
							}
						}
						mother_even_if_dead = {
							OR = {
								graphical_culture = norsegfx
								graphical_culture = norsegaelgfx
								graphical_culture = crimeangfx
							}
						}
					}
				}
				set_graphical_culture = saxon
			}
		}
	}
}

# Installatian check event.
character_event = {
	id    = blg.4
	title = blg.4.title
	desc  = blg.4.desc

	picture = GFX_evt_church_council
	border = GFX_event_normal_frame_intrigue
	hide_from = yes

	is_triggered_only = yes

	option = {
		name = blg.4.opt
	}
}

# Replacement for the original event since Paradox fucked up on the father scope.
# Add additional freckled graphical cultures.
character_event = {
	id = HFP.30030
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		NOR = {
			trait = freckles
			trait = freckles_2
			trait = freckles_3
			trait = freckles_4
			trait = freckles_5
		}
		OR = {
			graphical_culture = norsegfx
			graphical_culture = saxongfx
			graphical_culture = celticgfx
			graphical_culture = bretongfx
			graphical_culture = norsegaelgfx
			graphical_culture = tochariangfx
			AND = {
				culture = uyghur
				graphical_culture = centralasiangfx
			}
			AND = {
				culture = komi #udmurt
				graphical_culture = ugricgfx
			}
			mother_even_if_dead = {
				OR = {
					trait = freckles_3
					trait = freckles_2
					trait = freckles
					trait = freckles_4
					trait = freckles_5
					mother_even_if_dead = {
						OR = {
							trait = freckles_3
							trait = freckles_2
							trait = freckles
							trait = freckles_4
							trait = freckles_5
						}
					}
					true_father_even_if_dead = {
						OR = {
							trait = freckles_3
							trait = freckles_2
							trait = freckles
							trait = freckles_4
							trait = freckles_5
						}
					}
				}
			}
			true_father_even_if_dead = {
				OR = {
					trait = freckles_3
					trait = freckles_2
					trait = freckles
					trait = freckles_4
					trait = freckles_5
					mother_even_if_dead = {
						OR = {
							trait = freckles_3
							trait = freckles_2
							trait = freckles
							trait = freckles_4
							trait = freckles_5
						}
					}
					true_father_even_if_dead = {
						OR = {
							trait = freckles_3
							trait = freckles_2
							trait = freckles
							trait = freckles_4
							trait = freckles_5
						}
					}
				}
			}
			mother_even_if_dead = { #Rare cases of a non-gfx gaining the trait anyway due to mixed-race union.
				OR = {
					graphical_culture = norsegfx
					graphical_culture = saxongfx
					graphical_culture = celticgfx
					graphical_culture = bretongfx
					graphical_culture = norsegaelgfx
					graphical_culture = tochariangfx
					AND = {
						culture = uyghur
						graphical_culture = centralasiangfx
					}
					AND = {
						culture = komi #udmurt
						graphical_culture = ugricgfx
					}
				}
			}
			true_father_even_if_dead = {
				OR = {
					graphical_culture = norsegfx
					graphical_culture = saxongfx
					graphical_culture = celticgfx
					graphical_culture = bretongfx
					graphical_culture = norsegaelgfx
					graphical_culture = tochariangfx
					AND = {
						culture = uyghur
						graphical_culture = centralasiangfx
					}
					AND = {
						culture = komi #udmurt
						graphical_culture = ugricgfx
					}
				}
			}
		}
	}

	immediate = {
		random_list = {
			2 = {
				add_trait = freckles_5
				modifier = {
					factor = 5
					mother_even_if_dead = { trait = freckles_5 }
				}
				modifier = {
					factor = 5
					true_father_even_if_dead = { trait = freckles_5 }
				}
				#Grandparents
				modifier = {
					factor = 4
					true_father_even_if_dead = { true_father_even_if_dead = { trait = freckles_5 } }
				}
				modifier = {
					factor = 4
					true_father_even_if_dead = { mother_even_if_dead = { trait = freckles_5 } }
				}
				modifier = {
					factor = 4
					mother_even_if_dead = { mother_even_if_dead = { trait = freckles_5 } }
				}
				modifier = {
					factor = 4
					mother_even_if_dead = { true_father_even_if_dead = { trait = freckles_5 } }
				}

				modifier = {
					factor = 3
					mother_even_if_dead = { trait = freckles_4 }
				}
				modifier = {
					factor = 3
					true_father_even_if_dead = { trait = freckles_4 }
				}
				#Grandparents
				modifier = {
					factor = 2
					true_father_even_if_dead = { true_father_even_if_dead = { trait = freckles_4 } }
				}
				modifier = {
					factor = 2
					true_father_even_if_dead = { mother_even_if_dead = { trait = freckles_4 } }
				}
				modifier = {
					factor = 2
					mother_even_if_dead = { true_father_even_if_dead = { trait = freckles_4 } }
				}
				modifier = {
					factor = 2
					mother_even_if_dead = { mother_even_if_dead = { trait = freckles_4 } }
				}
				#Multiplier bonus
				modifier = {
					factor = 2
					true_father_even_if_dead = { trait = freckles_4 }
					mother_even_if_dead = { trait = freckles_4 }
				}
				#The thickest versions should only appear if a parent already has the freckles gene, not appear out of nowhere.
				trigger = {
					mother_even_if_dead = {
						OR = {
							trait = freckles_3
							trait = freckles_2
							trait = freckles
							trait = freckles_4
							trait = freckles_5
						}
					}
					true_father_even_if_dead = {
						OR = {
							trait = freckles_3
							trait = freckles_2
							trait = freckles
							trait = freckles_4
							trait = freckles_5
						}
					}
				}
			}
			6 = {
				add_trait = freckles_4
				modifier = {
					factor = 4
					mother_even_if_dead = { trait = freckles_4 }
				}
				modifier = {
					factor = 4
					true_father_even_if_dead = { trait = freckles_4 }
				}
				#Grandparents
				modifier = {
					factor = 3
					true_father_even_if_dead = { true_father_even_if_dead = { trait = freckles_4 } }
				}
				modifier = {
					factor = 3
					true_father_even_if_dead = { mother_even_if_dead = { trait = freckles_4 } }
				}
				modifier = {
					factor = 3
					mother_even_if_dead = { true_father_even_if_dead = { trait = freckles_4 } }
				}
				modifier = {
					factor = 3
					mother_even_if_dead = { mother_even_if_dead = { trait = freckles_4 } }
				}

				modifier = {
					factor = 2
					mother_even_if_dead = { trait = freckles }
				}
				modifier = {
					factor = 2
					true_father_even_if_dead = { trait = freckles }
				}
				#Grandparents
				modifier = {
					factor = 1.5
					true_father_even_if_dead = { true_father_even_if_dead = { trait = freckles } }
				}
				modifier = {
					factor = 1.5
					true_father_even_if_dead = { mother_even_if_dead = { trait = freckles } }
				}
				modifier = {
					factor = 1.5
					mother_even_if_dead = { true_father_even_if_dead = { trait = freckles } }
				}
				modifier = {
					factor = 1.5
					mother_even_if_dead = { mother_even_if_dead = { trait = freckles } }
				}
				#Multiplier bonus
				modifier = {
					factor = 2
					true_father_even_if_dead = { trait = freckles }
					mother_even_if_dead = { trait = freckles }
				}
				#The thickest versions should only appear if a parent already has the freckles gene, not appear out of nowhere.
				trigger = {
					mother_even_if_dead = {
						OR = {
							trait = freckles_3
							trait = freckles_2
							trait = freckles
							trait = freckles_4
							trait = freckles_5
						}
					}
					true_father_even_if_dead = {
						OR = {
							trait = freckles_3
							trait = freckles_2
							trait = freckles
							trait = freckles_4
							trait = freckles_5
						}
					}
				}
			}
			7 = {
				add_trait = freckles
				modifier = {
					factor = 4
					mother_even_if_dead = { trait = freckles }
				}
				modifier = {
					factor = 4
					true_father_even_if_dead = { trait = freckles }
				}
				#Grandparents
				modifier = {
					factor = 3
					true_father_even_if_dead = { true_father_even_if_dead = { trait = freckles } }
				}
				modifier = {
					factor = 3
					true_father_even_if_dead = { mother_even_if_dead = { trait = freckles } }
				}
				modifier = {
					factor = 3
					mother_even_if_dead = { true_father_even_if_dead = { trait = freckles } }
				}
				modifier = {
					factor = 3
					mother_even_if_dead = { mother_even_if_dead = { trait = freckles } }
				}

				modifier = {
					factor = 2
					mother_even_if_dead = { trait = freckles_2 }
				}
				modifier = {
					factor = 2
					true_father_even_if_dead = { trait = freckles_2 }
				}
				#Grandparents
				modifier = {
					factor = 1.5
					true_father_even_if_dead = { true_father_even_if_dead = { trait = freckles_2 } }
				}
				modifier = {
					factor = 1.5
					true_father_even_if_dead = { mother_even_if_dead = { trait = freckles_2 } }
				}
				modifier = {
					factor = 1.5
					mother_even_if_dead = { true_father_even_if_dead = { trait = freckles_2 } }
				}
				modifier = {
					factor = 1.5
					mother_even_if_dead = { mother_even_if_dead = { trait = freckles_2 } }
				}
				#Multiplier bonus
				modifier = {
					factor = 2
					true_father_even_if_dead = { trait = freckles_2 }
					mother_even_if_dead = { trait = freckles_2 }
				}
				#The thickest versions should only appear if a parent already has the freckles gene, not appear out of nowhere.
				trigger = {
					mother_even_if_dead = {
						OR = {
							trait = freckles_3
							trait = freckles_2
							trait = freckles
							trait = freckles_4
							trait = freckles_5
						}
					}
					true_father_even_if_dead = {
						OR = {
							trait = freckles_3
							trait = freckles_2
							trait = freckles
							trait = freckles_4
							trait = freckles_5
						}
					}
				}
			}
			7 = {
				add_trait = freckles_2
				modifier = {
					factor = 4
					mother_even_if_dead = { trait = freckles_2 }
				}
				modifier = {
					factor = 4
					true_father_even_if_dead = { trait = freckles_2 }
				}
				#Grandparents
				modifier = {
					factor = 2
					true_father_even_if_dead = { true_father_even_if_dead = { trait = freckles_2 } }
				}
				modifier = {
					factor = 2
					true_father_even_if_dead = { mother_even_if_dead = { trait = freckles_2 } }
				}
				modifier = {
					factor = 2
					mother_even_if_dead = { true_father_even_if_dead = { trait = freckles_2 } }
				}
				modifier = {
					factor = 2
					mother_even_if_dead = { mother_even_if_dead = { trait = freckles_2 } }
				}

				modifier = {
					factor = 2
					mother_even_if_dead = { trait = freckles_3 }
				}
				modifier = {
					factor = 2
					true_father_even_if_dead = { trait = freckles_3 }
				}
				#Grandparents
				modifier = {
					factor = 1.5
					true_father_even_if_dead = { true_father_even_if_dead = { trait = freckles_3 } }
				}
				modifier = {
					factor = 1.5
					true_father_even_if_dead = { mother_even_if_dead = { trait = freckles_3 } }
				}
				modifier = {
					factor = 1.5
					mother_even_if_dead = { true_father_even_if_dead = { trait = freckles_3 } }
				}
				modifier = {
					factor = 1.5
					mother_even_if_dead = { mother_even_if_dead = { trait = freckles_3 } }
				}
				#Multiplier bonus
				modifier = {
					factor = 2
					true_father_even_if_dead = { trait = freckles_3 }
					mother_even_if_dead = { trait = freckles_3 }
				}
			}
			10 = {
				add_trait = freckles_3
				modifier = {
					factor = 2
					mother_even_if_dead = { trait = freckles_3 }
				}
				modifier = {
					factor = 2
					true_father_even_if_dead = { trait = freckles_3 }
				}
				#Grandparents
				modifier = {
					factor = 1.5
					true_father_even_if_dead = { true_father_even_if_dead = { trait = freckles_3 } }
				}
				modifier = {
					factor = 1.5
					true_father_even_if_dead = { mother_even_if_dead = { trait = freckles_3 } }
				}
				modifier = {
					factor = 1.5
					mother_even_if_dead = { true_father_even_if_dead = { trait = freckles_3 } }
				}
				modifier = {
					factor = 1.5
					mother_even_if_dead = { mother_even_if_dead = { trait = freckles_3 } }
				}
			}
			80 = { } #Nothing
		}
	}
}
